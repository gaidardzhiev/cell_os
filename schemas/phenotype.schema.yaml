: "https://json-schema.org/draft/2020-12/schema"
title: PhenotypePackage
type: object
required: [version, arch, channels, schedules, signatures]
properties:
  version: { type: string, pattern: "^[0-9]+\.[0-9]+\.[0-9]+$" }
  arch: { type: string, enum: ["x86_64", "arm64"] }
  device_graph:
    type: object
    required: [nodes, edges]
    properties:
      nodes:
        type: array
        items:
          type: object
          required: [id, type]
          properties:
            id:   { type: string }
            type: { type: string }
            addr: { type: string }
      edges:
        type: array
        items:
          type: object
          required: [from, to]
          properties:
            from: { type: string }
            to:   { type: string }
  channels:
    type: array
    items:
      type: object
      required: [id, name, verbs, qos, priority]
      properties:
        id:       { type: integer, minimum: 0 }
        name:     { type: string }
        verbs:    { type: array, items: { type: string } }
        qos:      { type: string, enum: ["BE", "RT"] }
        priority: { type: integer, minimum: 0, maximum: 7 }
        refill_per_tick: { type: integer, minimum: 0 }
        bucket_max:      { type: integer, minimum: 0 }
  schedules:
    type: object
    properties:
      quantum_ns: { type: integer, minimum: 1000 }
  signatures:
    type: object
    required: [author, root]
    properties:
      author: { type: string }
      root:   { type: string }
